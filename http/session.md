# Session

## 概要

Web 上でのクライアントとサーバーとのやりとりにおいて、一連の関連性のある処理の流れのこと

オンラインショッピングの例を示す。

```mermaid
sequenceDiagram
    participant B as ブラウザ
    participant S as サーバー

    Note over B,S: 1. ログイン
    B->>S: ユーザー名・パスワード
    S->>S: 認証OK。太郎さんと確認
    S->>S: 太郎さん用の一時的な番号(セッションID:123)を作成
    S->>B: 「あなたの番号は123です」(Cookie)
    Note over S: 番号123 = 太郎さんとして記憶

    Note over B,S: 2. 商品をカートに追加
    B->>S: 商品追加リクエスト + Cookie(ID:123)
    S->>S: ID:123は太郎さん。カートに追加
    S->>B: カート追加完了

    Note over B,S: 3. 別ページへ移動
    B->>S: ページ要求 + Cookie(ID:123)
    S->>S: ID:123は太郎さん。カート内容確認
    S->>B: 太郎さんのカート(商品1個)を表示
```

このように Cookie にセッション ID を含めたやり取りを行うことで、サーバー側はリクエストの都度誰の操作かを元に必要な情報を適切に返すことができる。

これがない場合、上記例だと

- 都度ユーザー情報を送る必要がある: 画面遷移のたびにログインを要求
- ショッピングカードの状態が維持できない

といったことが起こる。

## 参考

- [イラスト図解式 この一冊で全部わかるWeb技術の基本 第2版 | SBクリエイティブ](https://www.sbcr.jp/product/4815625948/)
  - P.78, 79
- [セッションとは｜「分かりそう」で「分からない」でも「分かった」気になれるIT用語辞典](https://wa3.i-3-i.info/word1791.html)
