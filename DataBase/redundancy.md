# Redundancy

## 概要

DB の冗長化方法は大きくミラーリング、レプリケーション、シェアードストレージの3種類ある

### ミラーリング

データ更新命令を受けた DBMS が複数の DB に対し同時に同じ更新を行う。
平常時にはプリンシパル DBMS が最初に更新命令を受け取り、その指示をミラー DBMS に転送する。
プリンシパルに障害が発生している場合は、ミラーに直接更新命令が送られる。

可用性に重点を置く場合に採用されるようだが、運用コストが高かったりスケーラビリティが低い。

### レプリケーション

データの更新命令を受けた DBMS が更新内容を別の DBMS に連携し、連携を受けた DBMS が同じ内容の更新を自身の管理する DB に行う。
レプリケーションでは正系（平常時に処理を行う機器）をプライマリ、副系（障害時に正系に代わって処理を行う機器）をレプリカという。

主に負荷分散や地理的に分散したユーザーへの対応（1番近いサーバーとやり取り）するケースで採用されるらしい。非同期でレプリケーションされる場合、データ不整合のリスクが発生し得る。

### シェアードストレージ

DB を共用の機器に持ち、複数の DBMS から更新をかける。正系副系の概念がない。
DBMS は冗長化されるが DB 自体は冗長化されていないため、 DB を格納する機器は耐障害性に優れている必要がある。

データコピーが不要であり、データの整合性が担保されている。一方で、ストレージが単一障害点になるリスクが考えられる。

## 参考
- [イラスト図解式 この一冊で全部わかるWeb技術の基本 第2版 | SBクリエイティブ](https://www.sbcr.jp/product/4815625948/)
  - P.120, 121s
