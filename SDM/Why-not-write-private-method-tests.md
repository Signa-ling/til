# Why not write private method tests?

プライベートメソッドのテストを書かないことは一般的であるが、なぜ書かないのか。

この理由は恐らく過去に本、あるいは他の人から教えてもらった気がする…。でもちゃんと説明できそうになかったので、このタイミングで一度メモとして残しておく。

説明できるならベストだけど、最悪何故か問われてもこれを書いたという事実が引き出せれば良い。

## 前提

そもそもメソッドには大きくパブリックとプライベートがある。それぞれの特性は以下の通り。

**パブリックメソッド**

- クラスの主要な責任を明らかにする
- 外部からの実行が想定される
- 変更されにくい（安定性がある）

**プライベートメソッド**

- 実装の詳細部分
- 他のオブジェクトから送られてくることを想定していない
- 変更されやすい
- 他にもあるけど一旦割愛

また、メソッドをテストする主目的は、そのメソッドの振る舞いを確認することにある。

## なぜプライベートメソッドのテストを書かないのか

結論としては、プライベートメソッドのテストは保守コストが大きくなるため。

なぜかと言うと、

- プライベートメソッドはテストが実装に依存した状態になる
　- プライベートメソッドをテストするということは、実装の詳細を知りたいことになる
- テストが実装に依存していると、リファクタリングのような変更であってもテストの書き換えが発生
  - 小さい変更で壊れるので、テストの保守コストが大きくなる

## 参考

- [オブジェクト指向設計実践ガイド](https://gihyo.jp/book/2016/978-4-7741-8361-9)
  - P.91 にパブリック、プライベートの特性に関する話が掲載されている